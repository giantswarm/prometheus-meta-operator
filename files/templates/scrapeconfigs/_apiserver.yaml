[[- define "_apiserver" -]]
[[- if ne .ClusterType "management_cluster" ]]
    api_server: https://[[ .APIServerURL ]]
    tls_config:
      ca_file: /etc/prometheus/secrets/[[ .SecretName ]]/ca
      [[- if eq .AuthenticationMechanism "certificate" ]]
      cert_file: /etc/prometheus/secrets/[[ .SecretName ]]/crt
      key_file: /etc/prometheus/secrets/[[ .SecretName ]]/key
      [[- end -]]
      insecure_skip_verify: false
    [[- if eq .AuthenticationMechanism "token" ]]
    authorization:
      credentials_file: /etc/prometheus/secrets/[[ .SecretName ]]/token
    [[- end -]]
[[- end -]]
[[- end -]]
